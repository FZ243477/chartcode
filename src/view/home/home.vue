<template>
    <div class="home" style="margin-bottom:10px;">
      <div class="home_head">
        <div class="center_mask home_ref" ref="homePage" >
          <div class="center_mask" style="display: block;">
            <div class="nav_cancel">
              <img src="data:image/png;base64,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" class="cancel_img" />
            </div>
            <div class="nav_border"></div>
            <div class="nav_tabs">
              <!---->
              <div class="nav_li">
                个人中心
              </div>
              <!---->
              <div class="nav_li">
                下载记录
              </div>
              <div class="nav_li">
                我的收藏
              </div>
              <!---->
            </div>
            <div class="nav_footer">
              <a href="tel:0571-88693669" class="call_phone" style="width: 4rem;"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAC0ElEQVRYhc2ZTYhNYRjHf0bGGMlXyNDYTEQaXyuahixMImnSZFZWsyFlLLDCTmwoSbGYjJUp0cQ0IXaiJkkpCylNjIXyNRhj6q/n9p7pznXuvec995xz51fP7jzP/Z33nHPf531fJIXFMkl9kkYkHZE0s8h1mUbYj7U4yXyeSFo63WT3SRpTOMOSNkwX2W2SfhcRDfgmaUe1ZGfkjGE+8BpYQXnGgT3AowjXJkqNK3YmoqhRC/QDO7OWtZFdBHwA6jxzfwKtwIuU3P7DRrYjhqgxF7gHNKTsOInJtlWQvxzosSeUsFcoJrupwhq7gPaU/KZgsosTqNOUoFNR7ANThTW+A2uBjyl65rCRnaiwRlcWojjZkQryTwJ9CfqUxGTfx8w9D1zIyDOHyT6LkWeip1LwKYnJPvXM6amGKE72ITDmkXMrRZ+SmOwoMOCR01wFzxxB13XdI6czJZeyBP2sze1vgNUR83YDg1nLBiMr94VH5RIwu1qyRi/wNmLeGs+bS4aCdU57mTVYIYeqvRQf9JAdl7S3mrJNkkY9hH9VKHxQUmtcWYvDnq/DeIxXwnZ5buTVGJDUGEfW/tL6PYWNc5JqIojWSrobkv/VfTdeshYLJb2LIfxYUkOJuvWS7pepcdpX1mK924Xx5YukrpBRrnc3E4Wr7glHlrVoc+9kHF5J6pRUJ2mlpCHPGpd9ZXEbdnGF5fbQim34leNY4BH0BlGwfuA2MCfjecvWiFuBIR9ZXJK1kwvScwvlJbDFVxbXF9xxy+8s6Ygja8xzjc/+DGUf1ES4KIwfbsvoOPAnXcdJmuOObD7rgJvA5sT1pnIibvNRGLMkdbvpMg16bYJISjYIO9G5JmkiQdGLwdFW0rJBWPd0JcKBSik+SToQZwaLG0skHZX03EPys6SzdnxQ+JtJfGBRWQVsB1qAjUCjOx74Cwy7swnbcLGtfzuvmArwD87H7ePp0eXXAAAAAElFTkSuQmCC" class="call_phone_img" /> 点击联系我们 </a>
            </div>
          </div>
        </div>
        <div class="head_top">
          <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABMCAYAAACS9rJ1AAAClklEQVR4Xu2dsWpUURRF1xFtRYQ0QVCLYGktWghptBcCKomNfoFgwDogmiZFmjQaJCHjD+gHmEYsbLWLRRpBRDCNkivnMZM4Ws/ZI2/fatLMfqw1eyYz3PtOtNZOALPADeASkH97TY7AIfAReAPsR2vtArAJXDP8yVH/65lTwltgKQUsAyuGXwZ/FJQSHqeALeB2ebwDk8BWCtgBFsxDQmCQAl7ke5Ek3qGbKeAesAGcMo9SAj+BByngLPBk+DZ0uvQS+hv2HXgFPIpk0Fo7A5wHUobX5Al8BfYi4lsnwEtHwAJ07LtkC7AAMQFxvBtgAWIC4ng3wALEBMTxboAFiAmI490ACxATEMe7ARYgJiCOdwMsQExAHO8GWICYgDjeDbAAMQFxvBtgAWIC4ng3wALEBMTxo41ZJ4HLwJz4elTxuVX8HfA5IvJx2cqtiTPAGnCr5/tDfwBPgdWIOKgykALuA+s9hz/inVsG5yPiQ6WAl8DdqsD/IOdORGxXXacPaPxLejEi8kVZslKAGzCOurwBD4FnJbqnP+QXcCUi3lddajYgzwjnMaXrPf8gzv+CnncnFyPyAEXJSgH5XeAicBU419Md0/nK/wTsRsSXEvLDkLGfIoYyKvOnJisimuJi/FuQgvofmRZgAWIC4ng3wALEBMTxboAFiAmI490ACxATEMe7ARYgJiCOdwMsQExAHO8GWICYgDjeDbAAMQFxvBtgAWIC4ng3wALEBMTxboAFiAmI492AaRDgWxeXWzi+dbFv3l0OPwNz7+kAWPbt6yX8u9Cj29d7gINOQjfAwSNMdAK6ESYe4qMT0A3x8RgrjYCjMVYe5FYvIOHvAovZgNEow5vDUYb+cjZZIXkQJEcZvs5Rhr8BN0qfDXnI5DAAAAAASUVORK5CYII=" class="top_img1 left_slide_center_nav" />
          <img src="@/assets/img/home/logo.2e38c60.png" class="top_img2" />
          <img src="data:image/png;base64,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" class="top_img3" />
          <div style="clear: both;"></div>
        </div>

        <van-swipe :autoplay="3000" class="my-swipe"  indicator-color="white">
          <van-swipe-item v-for="(image, index) in images" :key="index" >
            <img v-lazy="image.cdn_images" style="max-height: 12rem;min-width: 100%;width: 100%;height: auto;" />
          </van-swipe-item>
        </van-swipe>

        <div class="tab_index display_show">
          <div id="1" class="tab_index_l">
            图片
          </div>
          <div id="2" class="tab_index_l">
            视频
          </div>
          <div id="3" class="tab_index_l tab_active">
            设计
          </div>
        </div>

        <div class="head_search">
          <div style="position: relative;">
            <div onclick="event.cancelBubble = true" id="3" class="head_s_l">
              <span>设计</span>
              <i class="van-icon van-icon-arrow-up" style="margin: 0.15rem 0.5rem 0px 0rem; display: none; float: right;">
                <!----></i>
              <i class="van-icon van-icon-arrow-down display_show" style="margin: 0.15rem 0.5rem 0px 0rem; display: none; float: right;">
                <!----></i>
            </div>
            <div class="head_s_l_bor"></div>
            <input type="text" name="s" onclick="event.cancelBubble = true" placeholder="搜索美食设计" class="search_text" />
            <div type="button" class="search_submit">
              <span style="display: table-cell; vertical-align: middle;">
                <img src="data:image/png;base64,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" class="button_img" /></span>
            </div>
            <div class="history_box display_show">
              <div class="history_box_content">
                <div class="history_box_title">
                  <span class="OLt9U">最近搜索</span>
                  <span class="b5nQ3">清除所有</span>
                </div>
                <div class="history_item"></div>
              </div>
            </div>
            <div style="clear: both;"></div>
          </div>
        </div>

      </div>

      <div class="hidden_title">
        <p class="hidden_title_p">热门分类</p>
        <div class="title_border"></div>
      </div>

      <div class="bl_1">
        <div class="bl_box">
          <p class="bl_box_title_p">餐饮必备</p>
          <div class="bl_box_title"></div>
          <img class="class_img2" data-src="https://image.shitutu.com/uploads/20200810/be00276b262675dd008b90fcad81597f.jpg_artwork" src="https://image.shitutu.com/uploads/20200810/be00276b262675dd008b90fcad81597f.jpg_artwork" lazy="loaded" />
        </div>
      </div>
      <a class="bl_more">查看更多</a>

      <div class="bl_2">
        <img class="bl_img2" data-src="https://image.shitutu.com/uploads/20200814/bb63d20e4bc6728ac1d85e8ce325af3b.png_artwork" src="https://image.shitutu.com/uploads/20200814/bb63d20e4bc6728ac1d85e8ce325af3b.png_artwork" lazy="loaded" style="height: auto;" />
      </div>

      <div style="height: 2rem;"></div>

    </div>
</template>

<script>

    import Cookie from "js-cookie";
    import { Search, Swipe, SwipeItem, NavBar,Toast } from 'vant';
    import store from "store";
    import { Swiper, SwiperItem,Loading } from "vux";
    import { index, loadMore, userIndex, newIndex } from "../../http/api.js";
    export default {
        components: {
            Swiper,
            SwiperItem,
            Loading,
            Search,
            Swipe,
            SwipeItem,
            NavBar,
            Toast,

        },
        data() {
            return {
                userinfo: {},
                responseData: {},
                vipPage: 0,
                mustPage: 0,
                showVipload: true,
                showMustload: true,
                searchValue: "",
                clientHeight: '',
                images: [
                  'https://img.yzcdn.cn/vant/apple-1.jpg',
                  'https://img.yzcdn.cn/vant/apple-2.jpg'
                ]
            }
        },
        filters:{
            formatDigest(val){
                // var pattern = new RegExp('(<\w+>)+([\w\u4e00-\u9fcc]+)(</\w+>)+','i');
                var pattern = new RegExp('<p.*?>(.*?)<\/p>','i');
                var a = val.match(pattern)[1];
                return a.replace(/[^\u4e00-\u9fa5]/gi,"");
            },
            formatUrl(val){
                if(val){
                    return val;
                }else{
                    return 'https://image.shitutu.com'
                }
            }
        },
      mounted() {
        // 获取浏览器可视区域高度
        this.clientHeight = `${document.documentElement.clientHeight}`          //document.body.clientWidth;
        //console.log(self.clientHeight);
        window.onresize = function temp() {
          this.clientHeight = `${document.documentElement.clientHeight}`;
        };
      },
      watch: {
        // 如果 `clientHeight` 发生改变，这个函数就会运行
        clientHeight: function () {
          this.changeFixed(this.clientHeight)
        }
      },
        methods: {
          changeFixed(clientHeight) {                        //动态修改样式
            console.log(clientHeight);
            this.$refs.homePage.style.height = clientHeight + 'px';
            console.log( this.$refs.homePage.style.height,' this.$refs.homePage.style.height')

          },
            // 跳转文章详情
            navToArticleDetail(value){
                Cookie.set('newsData', JSON.stringify(value), {expires: 60 * 60 * 24});
                this.$router.push({ path: '/articleDetail' })
            },
            // 跳转搜索页面
            navToSearch(){
                this.$router.push({ path: '/search' })
            },
            // 跳转上周热图
            navToHotImg() {
                this.$router.push({ path: '/hotImg' })
            },
            // 获取新首页数据
            getData() {
              newIndex().then(res => {
                  console.log(res);
                  if (res.code === 1) {
                  this.images = res.data.banner
                  } else {
                    this.$vux.toast.text(res.msg, "middle");
                  }
                })
            },
            // 跳转图片详情
            goDetail(e) {
                this.$router.push({ path: '/activityDetail', query: { id: e.id } })
            },
            // 跳转会员免费
            goVipfree(e) {
                if (e == 1) {
                    this.$router.push({ path: '/vipfree', query: { status: 1 } })
                } else if (e == 2) {
                    this.$router.push({ path: '/vipfree', query: { type: 1 } })
                }
            },
            loadVipfree() {
                this.$vux.loading.show({})
                this.vipPage++;
                loadMore({
                    type: 1,
                    page: this.vipPage
                }).then(res => {
                    console.log(res)
                    this.$vux.loading.hide()
                    if (res.code == 1) {
                        if (res.data.length == 0) {
                            this.vipPage--;
                            this.$vux.toast.text("无法加载更多", "middle");
                            this.showVipload = false;
                        } else {
                            this.responseData.free = this.responseData.free.concat(res.data)
                        }
                    } else {
                        this.$vux.toast.text(res.msg, "middle");
                    }
                })
            },
            loadMustbuy() {
                this.$vux.loading.show({})
                this.mustPage++;

                loadMore({
                    type: 2,
                    page: this.mustPage
                }).then(res => {  //加载更多
                    console.log(res)
                    this.$vux.loading.hide()
                    if (res.code == 1) {
                        if (res.data.length == 0) {
                            this.mustPage--;
                            this.$vux.toast.text("无法加载更多", "middle");
                            this.showMustload = false;
                        } else {
                            this.responseData.mustBuy = this.responseData.mustBuy.concat(res.data)
                        }
                    } else {
                        this.$vux.toast.text(res.msg, "middle");
                    }
                })
            },
            GetUrlParam(paraName) {
                var url = document.location.toString();
                var arrObj = url.split("?");
                if (arrObj.length > 1) {
                    var arrPara = arrObj[1].split("&");
                    var arr;
                    for (var i = 0; i < arrPara.length; i++) {
                        arr = arrPara[i].split("=");
                        if (arr != null && arr[0] == paraName) {
                            return arr[1];
                        }
                    }
                    return "";
                }
                else {
                    return "";
                }
            }
        },
        created() {
            // 判断是否是微信浏览器
            let isWeiXin = () => { return navigator.userAgent.toLowerCase().indexOf('micromessenger') !== -1 }
            let urlToken = this.GetUrlParam('token');
            let token;
            if (store.get("userinfo") && store.get("userinfo").token) {
                token = store.get("userinfo").token;
                this.userinfo = store.get("userinfo");
            }
            if (isWeiXin()) {
                store.set("isWeiXin", true)
                if (!token) {
                    if (!urlToken) {
                        window.location.href = "https://admin.shitutu.com/public/addons/third/index/connect?platform=wechat";
                        return;
                    } else {
                        userIndex({ token: urlToken }).then(res => {
                            console.log(res)
                            if (res.code == 1) {
                                store.remove("userinfo");
                                store.set("userinfo", res.data.welcome)
                                this.userinfo = res.data.welcome;
                            } else {
                                this.$vux.toast.text(res.msg, 'middle')
                            }
                        })
                    }
                }
            } else {
                store.set("isWeiXin", false)
                if (urlToken) {
                    userIndex({ token: urlToken }).then(res => {
                        console.log(res)
                        if (res.code == 1) {
                            store.remove("userinfo");
                            store.set("userinfo", res.data.welcome)
                            this.userinfo = res.data.welcome;
                        } else {
                            this.$vux.toast.text(res.msg, 'middle')
                        }
                    })
                }
            }
            this.getData();
        }
    };
</script>

<style lang="less">

</style>
